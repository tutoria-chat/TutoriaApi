# Proxy settings for handling large file uploads
# Increase timeouts to prevent connection drops during file upload/processing

proxy_connect_timeout 300;
proxy_send_timeout 300;
proxy_read_timeout 300;
send_timeout 300;

# Client timeouts for request body and headers
client_body_timeout 300;
client_header_timeout 300;

# Keep-alive timeout for persistent connections
keepalive_timeout 300;

# Disable proxy buffering to stream uploads directly to backend
# This prevents nginx from buffering entire file to disk
proxy_buffering off;
proxy_request_buffering off;

# Set buffer sizes for upload handling
client_body_buffer_size 128k;
proxy_buffer_size 8k;
proxy_buffers 8 8k;
